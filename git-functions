function git-prune-branches() {
    for branch in $(git branch -l|grep -v -e '\(develop\|master\|staging\)');
    do
        git branch -d $branch
    done
}

function git-svn-prepare-migration() {
    if [ "$1" = "" ]; then
        echo "svn source url not given"
        return 1
    fi

    git svn clone "$1" --stdlayout --no-metadata
    cd ${1##*/}
    git-svn-migrate-branches
    git-svn-migrate-tags
}

function git-svn-push-migrated-repo() {
    if [ "$1" = "" ]; then
        echo "git target remote not given"
        return 1
    fi

    git remote add origin "$1"
    git push --all origin
    git push --tags origin

}

function git-svn-migrate-branches() {
    for branch in $(git branch -r|grep -v -e '/\(trunk\|tags\)'); 
    do
        git checkout -q $branch
        git checkout -q -b ${branch#origin/}
    done
    git checkout -q master
    echo "Created branches:"
    git branch -l|grep -v master
}

function git-svn-migrate-tags() {
    for tag in $(git branch -r|grep '/tags');
    do
        git checkout -q $tag
        git tag ${tag#**/tags/}
    done
    git checkout -q master
    echo "Created tags:"
    git tag -l
}

function git-svn-migrate-ignore() {
    git svn show-ignore > .gitignore
    git add .gitignore
    git commit -m "Converted svn ignores to .gitignore"
}
